<div class="container mt-5 mb-5">
  <div class="row">
    <h3>以下の内容で、投稿します</h3>
  </div>
</div>

<div class="container mb-5">
  <div class="row">
    <%= form_with(model: @article, url: articles_path, local: true) do |form| %>
      <%= form.hidden_field :title %>
      <%= form.hidden_field :image %>
      <%= form.hidden_field :image_cache %>
      <%= form.hidden_field :category %>
      <%= form.hidden_field :status %>
      <%= form.hidden_field :date %>
      <%= form.hidden_field :deadline %>

      <h4>タイトル:<%= @article.title %></h4>

      <p>サムネイル</p>
      <% if @article.image? %>
        <%= image_tag @article.image.url, class: "confirm_article_image", size: '500x300' %>
      <% else %>
        <%= image_tag 'no_image.png', size: '500x300', class: "confirm_article_image" %>
      <% end %>

      <h5>選択したカテゴリ</h5>
          <%= form.collection_check_boxes(:category_ids, Category.all, :id, :name) do |b| %>
            <%= b.label { b.check_box + b.text } %>
        <% end %>

      <% n = 0 %>
      <h3>入力された内容</h3>
      <%= form.fields_for :procedures do |procedure| %>
        <%= procedure.hidden_field :image %>
        <%= procedure.hidden_field :image_cache %>
        <%= procedure.hidden_field :content %>

          <% if procedure.object.image? %>
          <h4> 手順<%= n += 1 %> </h4>
            <%= image_tag procedure.object.image.url, class: "procedure_image", size: '200x200' %>
          <% else %>
            <%= image_tag 'no_image.png', size: '200x200', class: 'procedure_image' %>
          <% end %>
          <h4><%= procedure.object.content %></h4>
      <% end %>

      <% if @article.date? %>
      <p>作業日:<%= @article.date.strftime("%Y/%m/%d") %></p>
      <% end %>
      <% if @article.deadline? %>
      <p>期限:<%= @article.deadline.strftime("%Y/%m/%d") %></p>
      <% end %>
      <%= form.submit  "登録する" %>

      <%= form.submit "戻る", name: 'back' %>
    <% end %>
  </div>
</div>
