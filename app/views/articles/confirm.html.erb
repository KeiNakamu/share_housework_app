<div class="container mt-5">
  <div class="row col-md-8 mx-auto">
    <h3>以下の内容で、投稿します</h3>
  </div>
</div>

<div class="container mb-5">
  <div class="row col-md-8 mx-auto">
    <%= form_with(model: @article, url: articles_path, local: true) do |form| %>
      <%= form.hidden_field :title %>
      <%= form.hidden_field :image %>
      <%= form.hidden_field :image_cache %>
      <%= form.hidden_field :category %>
      <%= form.hidden_field :status %>
      <%= form.hidden_field :date %>
      <%= form.hidden_field :deadline %>

      <h4 class="mt-5">タイトル:<%= @article.title %></h4>

      <p class="mt-3">サムネイル</p>
      <% if @article.image? %>
        <%= image_tag @article.image.url, class: "confirm_article_image" %>
      <% else %>
        <%= image_tag 'no_image.png', size: '300x200', class: "confirm_article_image" %>
      <% end %>

      <h4 class="mt-5 mb-3">選択したカテゴリ</h4>
          <%= form.collection_check_boxes(:category_ids, Category.all, :id, :name) do |b| %>
            <%= b.label { b.check_box + b.text } %>
        <% end %>

      <% n = 0 %>
      <h4 class= "mt-5">入力した内容</h4>
      <%= form.fields_for :procedures do |procedure| %>
        <%= procedure.hidden_field :image %>
        <%= procedure.hidden_field :image_cache %>
        <%= procedure.hidden_field :content %>

          <% if procedure.object.image? %>
          <h4> 手順<%= n += 1 %> </h4>
            <%= image_tag procedure.object.image.url, class: "procedure_image" %>
          <% else %>
            <%= image_tag 'no_image.png', size: '300x200', class: 'procedure_image' %>
          <% end %>
          <h4><%= procedure.object.content %></h4>
      <% end %>

      <% if @article.date? %>
      <p>作業日:<%= @article.date.strftime("%Y/%m/%d") %></p>
      <% end %>

      <% if @article.deadline? %>
      <p>期限:<%= @article.deadline.strftime("%Y/%m/%d") %></p>
      <% end %>

      <%= form.submit  "登録する", class: 'btn btn-primary' %>

      <%= form.submit "戻る", name: 'back', class: 'btn btn-info' %>
    <% end %>
  </div>
</div>
